@using Secyud.Ugf.DataManager
@using Secyud.Ugf
<Fields>

    <Field ColumnSize="ColumnSize.Is10">
        <Autocomplete TItem="Tuple<string, Guid>" TValue="Guid"
                      Placeholder="@Placeholder"
                      Data="U.Tm.SubTypes(BaseClass)"
                      TextField="u => u.Item1"
                      ValueField="u => u.Item2"
                      SelectedValueChanged="v => _selectClassId = v"
                      Filter="AutocompleteFilter.Contains">
        </Autocomplete>
    </Field>
    <Field ColumnSize="ColumnSize.Is1">
        <Button Width="Width.Is25" Color="Color.Secondary">
            <Icon Width="Width.Is25" Clicked="EnsureSelect"
                  Name="IconName.Check"/>
        </Button>
    </Field>
</Fields>

@code {

    [Parameter]
    public Type BaseClass { get; set; }

    [Parameter]
    public EventCallback<Guid> EnsureAction { get; set; }

    [Parameter]
    public string Placeholder { get; set; }

    private Guid _selectClassId;

    private async Task EnsureSelect()
    {
        await EnsureAction.InvokeAsync(_selectClassId);
    }

}